{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/pointoboom/Desktop/Boom/LIS-Project/LIS-Frontend/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { cn } from \"@/lib/utils\";\n\nconst Card = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(\n  ({ className, ...props }, ref) => (\n    <div\n      ref={ref}\n      className={cn(\n        \"rounded-xl border border-zinc-200 bg-white text-zinc-900 dark:border-zinc-800 dark:bg-zinc-900 dark:text-zinc-50\",\n        className\n      )}\n      {...props}\n    />\n  )\n);\nCard.displayName = \"Card\";\n\nconst CardHeader = ({ className, ...props }: React.HTMLAttributes<HTMLDivElement>) => (\n  <div className={cn(\"flex flex-col space-y-1.5 p-4\", className)} {...props} />\n);\n\nconst CardTitle = ({ className, ...props }: React.HTMLAttributes<HTMLHeadingElement>) => (\n  <h3 className={cn(\"font-semibold leading-none tracking-tight\", className)} {...props} />\n);\n\nconst CardDescription = ({ className, ...props }: React.HTMLAttributes<HTMLParagraphElement>) => (\n  <p className={cn(\"text-sm text-zinc-500 dark:text-zinc-400\", className)} {...props} />\n);\n\nconst CardContent = ({ className, ...props }: React.HTMLAttributes<HTMLDivElement>) => (\n  <div className={cn(\"p-4 pt-0\", className)} {...props} />\n);\n\nconst CardFooter = ({ className, ...props }: React.HTMLAttributes<HTMLDivElement>) => (\n  <div className={cn(\"flex items-center p-4 pt-0\", className)} {...props} />\n);\n\nexport { Card, CardHeader, CardTitle, CardDescription, CardContent, CardFooter };\n\n"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA;AACA;;;;AAEA,MAAM,qBAAO,mOAAgB,MAC3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,qPAAC;QACC,KAAK;QACL,WAAW,IAAA,6KAAE,EACX,oHACA;QAED,GAAG,KAAK;;;;;;;AAIf,KAAK,WAAW,GAAG;AAEnB,MAAM,aAAa,CAAC,EAAE,SAAS,EAAE,GAAG,OAA6C,iBAC/E,qPAAC;QAAI,WAAW,IAAA,6KAAE,EAAC,iCAAiC;QAAa,GAAG,KAAK;;;;;;MADrE;AAIN,MAAM,YAAY,CAAC,EAAE,SAAS,EAAE,GAAG,OAAiD,iBAClF,qPAAC;QAAG,WAAW,IAAA,6KAAE,EAAC,6CAA6C;QAAa,GAAG,KAAK;;;;;;MADhF;AAIN,MAAM,kBAAkB,CAAC,EAAE,SAAS,EAAE,GAAG,OAAmD,iBAC1F,qPAAC;QAAE,WAAW,IAAA,6KAAE,EAAC,4CAA4C;QAAa,GAAG,KAAK;;;;;;MAD9E;AAIN,MAAM,cAAc,CAAC,EAAE,SAAS,EAAE,GAAG,OAA6C,iBAChF,qPAAC;QAAI,WAAW,IAAA,6KAAE,EAAC,YAAY;QAAa,GAAG,KAAK;;;;;;MADhD;AAIN,MAAM,aAAa,CAAC,EAAE,SAAS,EAAE,GAAG,OAA6C,iBAC/E,qPAAC;QAAI,WAAW,IAAA,6KAAE,EAAC,8BAA8B;QAAa,GAAG,KAAK;;;;;;MADlE","debugId":null}},
    {"offset": {"line": 96, "column": 0}, "map": {"version":3,"sources":["file:///Users/pointoboom/Desktop/Boom/LIS-Project/LIS-Frontend/components/ui/table.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { cn } from \"@/lib/utils\";\n\nconst Table = ({ className, ...props }: React.TableHTMLAttributes<HTMLTableElement>) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n);\n\nconst TableHeader = ({ className, ...props }: React.HTMLAttributes<HTMLTableSectionElement>) => (\n  <thead className={cn(\"[&_tr]:border-b\", className)} {...props} />\n);\n\nconst TableBody = ({ className, ...props }: React.HTMLAttributes<HTMLTableSectionElement>) => (\n  <tbody className={cn(\"[&_tr:last-child]:border-0\", className)} {...props} />\n);\n\nconst TableRow = ({ className, ...props }: React.HTMLAttributes<HTMLTableRowElement>) => (\n  <tr className={cn(\"border-b transition-colors hover:bg-zinc-50 dark:hover:bg-zinc-800/50\", className)} {...props} />\n);\n\nconst TableHead = ({ className, ...props }: React.ThHTMLAttributes<HTMLTableCellElement>) => (\n  <th\n    className={cn(\n      \"h-10 px-4 text-left align-middle font-medium text-zinc-600 dark:text-zinc-400 [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n);\n\nconst TableCell = ({ className, ...props }: React.TdHTMLAttributes<HTMLTableCellElement>) => (\n  <td\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n);\n\nconst TableCaption = ({ className, ...props }: React.HTMLAttributes<HTMLTableCaptionElement>) => (\n  <caption\n    className={cn(\"mt-4 text-sm text-zinc-500 dark:text-zinc-400\", className)}\n    {...props}\n  />\n);\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n};\n\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AACA;;;AAEA,MAAM,QAAQ,CAAC,EAAE,SAAS,EAAE,GAAG,OAAoD,iBACjF,qPAAC;QAAI,WAAU;kBACb,cAAA,qPAAC;YACC,WAAW,IAAA,6KAAE,EAAC,iCAAiC;YAC9C,GAAG,KAAK;;;;;;;;;;;KAJT;AASN,MAAM,cAAc,CAAC,EAAE,SAAS,EAAE,GAAG,OAAsD,iBACzF,qPAAC;QAAM,WAAW,IAAA,6KAAE,EAAC,mBAAmB;QAAa,GAAG,KAAK;;;;;;MADzD;AAIN,MAAM,YAAY,CAAC,EAAE,SAAS,EAAE,GAAG,OAAsD,iBACvF,qPAAC;QAAM,WAAW,IAAA,6KAAE,EAAC,8BAA8B;QAAa,GAAG,KAAK;;;;;;MADpE;AAIN,MAAM,WAAW,CAAC,EAAE,SAAS,EAAE,GAAG,OAAkD,iBAClF,qPAAC;QAAG,WAAW,IAAA,6KAAE,EAAC,yEAAyE;QAAa,GAAG,KAAK;;;;;;MAD5G;AAIN,MAAM,YAAY,CAAC,EAAE,SAAS,EAAE,GAAG,OAAqD,iBACtF,qPAAC;QACC,WAAW,IAAA,6KAAE,EACX,+GACA;QAED,GAAG,KAAK;;;;;;MANP;AAUN,MAAM,YAAY,CAAC,EAAE,SAAS,EAAE,GAAG,OAAqD,iBACtF,qPAAC;QACC,WAAW,IAAA,6KAAE,EAAC,kDAAkD;QAC/D,GAAG,KAAK;;;;;;MAHP;AAON,MAAM,eAAe,CAAC,EAAE,SAAS,EAAE,GAAG,OAAsD,iBAC1F,qPAAC;QACC,WAAW,IAAA,6KAAE,EAAC,iDAAiD;QAC9D,GAAG,KAAK;;;;;;MAHP","debugId":null}},
    {"offset": {"line": 202, "column": 0}, "map": {"version":3,"sources":["file:///Users/pointoboom/Desktop/Boom/LIS-Project/LIS-Frontend/app/dashboard/reports/print-button.tsx"],"sourcesContent":["\"use client\";\n\nimport { Button } from \"@/components/ui/button\";\nimport { Printer } from \"lucide-react\";\n\nexport default function PrintButton() {\n  return (\n    <Button variant=\"outline\" size=\"sm\" className=\"print:hidden\" onClick={() => window.print()}>\n      <Printer className=\"mr-2 h-4 w-4\" /> Print\n    </Button>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAKe,SAAS;IACtB,qBACE,qPAAC,gMAAM;QAAC,SAAQ;QAAU,MAAK;QAAK,WAAU;QAAe,SAAS,IAAM,OAAO,KAAK;;0BACtF,qPAAC,8QAAO;gBAAC,WAAU;;;;;;YAAiB;;;;;;;AAG1C;KANwB","debugId":null}},
    {"offset": {"line": 245, "column": 0}, "map": {"version":3,"sources":["file:///Users/pointoboom/Desktop/Boom/LIS-Project/LIS-Frontend/app/dashboard/reports/export-jpg-button.tsx"],"sourcesContent":["\"use client\";\n\nimport { Button } from \"@/components/ui/button\";\nimport { Image as ImageIcon } from \"lucide-react\";\nimport * as htmlToImage from \"html-to-image\";\n\ntype Props = {\n  targetId: string;\n  filename?: string;\n};\n\nexport default function ExportJpgButton({ targetId, filename = \"report.jpg\" }: Props) {\n  const onExport = async () => {\n    const node = document.getElementById(targetId);\n    if (!node) return;\n    // Temporarily add white background to ensure readable capture in dark mode\n    const prevBg = node.style.backgroundColor;\n    node.style.backgroundColor = \"#ffffff\";\n    try {\n      const dataUrl = await htmlToImage.toJpeg(node, {\n        quality: 0.95,\n        backgroundColor: \"#ffffff\",\n        pixelRatio: 2,\n        style: { padding: \"0.5in\" },\n      });\n      const link = document.createElement(\"a\");\n      link.download = filename;\n      link.href = dataUrl;\n      link.click();\n    } catch (e) {\n      console.error(\"Export to JPG failed\", e);\n    } finally {\n      node.style.backgroundColor = prevBg;\n    }\n  };\n\n  return (\n    <Button variant=\"outline\" size=\"sm\" className=\"print:hidden\" onClick={onExport}>\n      <ImageIcon className=\"mr-2 h-4 w-4\" /> Export JPG\n    </Button>\n  );\n}\n\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAWe,SAAS,gBAAgB,EAAE,QAAQ,EAAE,WAAW,YAAY,EAAS;IAClF,MAAM,WAAW;QACf,MAAM,OAAO,SAAS,cAAc,CAAC;QACrC,IAAI,CAAC,MAAM;QACX,2EAA2E;QAC3E,MAAM,SAAS,KAAK,KAAK,CAAC,eAAe;QACzC,KAAK,KAAK,CAAC,eAAe,GAAG;QAC7B,IAAI;YACF,MAAM,UAAU,MAAM,uNAAkB,CAAC,MAAM;gBAC7C,SAAS;gBACT,iBAAiB;gBACjB,YAAY;gBACZ,OAAO;oBAAE,SAAS;gBAAQ;YAC5B;YACA,MAAM,OAAO,SAAS,aAAa,CAAC;YACpC,KAAK,QAAQ,GAAG;YAChB,KAAK,IAAI,GAAG;YACZ,KAAK,KAAK;QACZ,EAAE,OAAO,GAAG;YACV,QAAQ,KAAK,CAAC,wBAAwB;QACxC,SAAU;YACR,KAAK,KAAK,CAAC,eAAe,GAAG;QAC/B;IACF;IAEA,qBACE,qPAAC,gMAAM;QAAC,SAAQ;QAAU,MAAK;QAAK,WAAU;QAAe,SAAS;;0BACpE,qPAAC,wQAAS;gBAAC,WAAU;;;;;;YAAiB;;;;;;;AAG5C;KA9BwB","debugId":null}},
    {"offset": {"line": 315, "column": 0}, "map": {"version":3,"sources":["file:///Users/pointoboom/Desktop/Boom/LIS-Project/LIS-Frontend/app/dashboard/reports/export-png-button.tsx"],"sourcesContent":["\"use client\";\n\nimport { Button } from \"@/components/ui/button\";\nimport { Image as ImageIcon } from \"lucide-react\";\nimport * as htmlToImage from \"html-to-image\";\n\ntype Props = {\n  targetId: string;\n  filename?: string;\n};\n\nexport default function ExportPngButton({ targetId, filename = \"report.png\" }: Props) {\n  const onExport = async () => {\n    const node = document.getElementById(targetId);\n    if (!node) return;\n    const prevBg = node.style.backgroundColor;\n    node.style.backgroundColor = \"#ffffff\";\n    try {\n      const dataUrl = await htmlToImage.toPng(node, {\n        backgroundColor: \"#ffffff\",\n        pixelRatio: 2,\n        style: { padding: \"0.5in\" },\n      });\n      const link = document.createElement(\"a\");\n      link.download = filename;\n      link.href = dataUrl;\n      link.click();\n    } catch (e) {\n      console.error(\"Export to PNG failed\", e);\n    } finally {\n      node.style.backgroundColor = prevBg;\n    }\n  };\n\n  return (\n    <Button variant=\"outline\" size=\"sm\" className=\"print:hidden\" onClick={onExport}>\n      <ImageIcon className=\"mr-2 h-4 w-4\" /> Export PNG\n    </Button>\n  );\n}\n\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAWe,SAAS,gBAAgB,EAAE,QAAQ,EAAE,WAAW,YAAY,EAAS;IAClF,MAAM,WAAW;QACf,MAAM,OAAO,SAAS,cAAc,CAAC;QACrC,IAAI,CAAC,MAAM;QACX,MAAM,SAAS,KAAK,KAAK,CAAC,eAAe;QACzC,KAAK,KAAK,CAAC,eAAe,GAAG;QAC7B,IAAI;YACF,MAAM,UAAU,MAAM,sNAAiB,CAAC,MAAM;gBAC5C,iBAAiB;gBACjB,YAAY;gBACZ,OAAO;oBAAE,SAAS;gBAAQ;YAC5B;YACA,MAAM,OAAO,SAAS,aAAa,CAAC;YACpC,KAAK,QAAQ,GAAG;YAChB,KAAK,IAAI,GAAG;YACZ,KAAK,KAAK;QACZ,EAAE,OAAO,GAAG;YACV,QAAQ,KAAK,CAAC,wBAAwB;QACxC,SAAU;YACR,KAAK,KAAK,CAAC,eAAe,GAAG;QAC/B;IACF;IAEA,qBACE,qPAAC,gMAAM;QAAC,SAAQ;QAAU,MAAK;QAAK,WAAU;QAAe,SAAS;;0BACpE,qPAAC,wQAAS;gBAAC,WAAU;;;;;;YAAiB;;;;;;;AAG5C;KA5BwB","debugId":null}},
    {"offset": {"line": 383, "column": 0}, "map": {"version":3,"sources":["file:///Users/pointoboom/Desktop/Boom/LIS-Project/LIS-Frontend/app/dashboard/reports/export-pdf-button.tsx"],"sourcesContent":["\"use client\";\n\nimport { Button } from \"@/components/ui/button\";\nimport { FileDown } from \"lucide-react\";\nimport * as htmlToImage from \"html-to-image\";\nimport jsPDF from \"jspdf\";\n\ntype Props = {\n  targetId: string;\n  filename?: string;\n};\n\nexport default function ExportPdfButton({ targetId, filename = \"report.pdf\" }: Props) {\n  const onExport = async () => {\n    const node = document.getElementById(targetId);\n    if (!node) return;\n    const prevBg = node.style.backgroundColor;\n    node.style.backgroundColor = \"#ffffff\";\n    try {\n      const dataUrl = await htmlToImage.toPng(node, {\n        backgroundColor: \"#ffffff\",\n        pixelRatio: 2,\n        style: { padding: \"0.5in\" },\n      });\n\n      const pdf = new jsPDF({ orientation: \"p\", unit: \"pt\", format: \"a4\" });\n      const pageWidth = pdf.internal.pageSize.getWidth();\n      const pageHeight = pdf.internal.pageSize.getHeight();\n\n      const img = new Image();\n      img.src = dataUrl;\n      await img.decode().catch(() => {});\n\n      // Fit image to page width and preserve aspect ratio\n      const imgWidth = pageWidth;\n      const scale = imgWidth / (img.naturalWidth || 1);\n      const imgHeight = (img.naturalHeight || 1) * scale;\n\n      let y = 0;\n      if (imgHeight <= pageHeight) {\n        pdf.addImage(dataUrl, \"PNG\", 0, y, imgWidth, imgHeight);\n      } else {\n        // Simple paginate by slicing the tall image into pages vertically\n        // Draw the image multiple times with negative y offset to simulate slices\n        let remaining = imgHeight;\n        const sliceHeight = pageHeight;\n        while (remaining > 0) {\n          const h = Math.min(sliceHeight, remaining);\n          // add page except first\n          if (y > 0) pdf.addPage();\n          pdf.addImage(dataUrl, \"PNG\", 0, -y, imgWidth, imgHeight);\n          y += h;\n          remaining -= h;\n        }\n      }\n\n      pdf.save(filename);\n    } catch (e) {\n      console.error(\"Export to PDF failed\", e);\n    } finally {\n      node.style.backgroundColor = prevBg;\n    }\n  };\n\n  return (\n    <Button variant=\"outline\" size=\"sm\" className=\"print:hidden\" onClick={onExport}>\n      <FileDown className=\"mr-2 h-4 w-4\" /> Export PDF\n    </Button>\n  );\n}\n\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAYe,SAAS,gBAAgB,EAAE,QAAQ,EAAE,WAAW,YAAY,EAAS;IAClF,MAAM,WAAW;QACf,MAAM,OAAO,SAAS,cAAc,CAAC;QACrC,IAAI,CAAC,MAAM;QACX,MAAM,SAAS,KAAK,KAAK,CAAC,eAAe;QACzC,KAAK,KAAK,CAAC,eAAe,GAAG;QAC7B,IAAI;YACF,MAAM,UAAU,MAAM,sNAAiB,CAAC,MAAM;gBAC5C,iBAAiB;gBACjB,YAAY;gBACZ,OAAO;oBAAE,SAAS;gBAAQ;YAC5B;YAEA,MAAM,MAAM,IAAI,yNAAK,CAAC;gBAAE,aAAa;gBAAK,MAAM;gBAAM,QAAQ;YAAK;YACnE,MAAM,YAAY,IAAI,QAAQ,CAAC,QAAQ,CAAC,QAAQ;YAChD,MAAM,aAAa,IAAI,QAAQ,CAAC,QAAQ,CAAC,SAAS;YAElD,MAAM,MAAM,IAAI;YAChB,IAAI,GAAG,GAAG;YACV,MAAM,IAAI,MAAM,GAAG,KAAK,CAAC,KAAO;YAEhC,oDAAoD;YACpD,MAAM,WAAW;YACjB,MAAM,QAAQ,WAAW,CAAC,IAAI,YAAY,IAAI,CAAC;YAC/C,MAAM,YAAY,CAAC,IAAI,aAAa,IAAI,CAAC,IAAI;YAE7C,IAAI,IAAI;YACR,IAAI,aAAa,YAAY;gBAC3B,IAAI,QAAQ,CAAC,SAAS,OAAO,GAAG,GAAG,UAAU;YAC/C,OAAO;gBACL,kEAAkE;gBAClE,0EAA0E;gBAC1E,IAAI,YAAY;gBAChB,MAAM,cAAc;gBACpB,MAAO,YAAY,EAAG;oBACpB,MAAM,IAAI,KAAK,GAAG,CAAC,aAAa;oBAChC,wBAAwB;oBACxB,IAAI,IAAI,GAAG,IAAI,OAAO;oBACtB,IAAI,QAAQ,CAAC,SAAS,OAAO,GAAG,CAAC,GAAG,UAAU;oBAC9C,KAAK;oBACL,aAAa;gBACf;YACF;YAEA,IAAI,IAAI,CAAC;QACX,EAAE,OAAO,GAAG;YACV,QAAQ,KAAK,CAAC,wBAAwB;QACxC,SAAU;YACR,KAAK,KAAK,CAAC,eAAe,GAAG;QAC/B;IACF;IAEA,qBACE,qPAAC,gMAAM;QAAC,SAAQ;QAAU,MAAK;QAAK,WAAU;QAAe,SAAS;;0BACpE,qPAAC,qRAAQ;gBAAC,WAAU;;;;;;YAAiB;;;;;;;AAG3C;KAzDwB","debugId":null}},
    {"offset": {"line": 481, "column": 0}, "map": {"version":3,"sources":["file:///Users/pointoboom/Desktop/Boom/LIS-Project/LIS-Frontend/app/dashboard/reports/%5Bid%5D/page.tsx"],"sourcesContent":["\"use client\";\nimport { useEffect, useState } from \"react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\nimport { Button } from \"@/components/ui/button\";\nimport Link from \"next/link\";\nimport moment from \"moment\";\nimport PrintButton from \"../print-button\";\nimport ExportJpgButton from \"../export-jpg-button\";\nimport ExportPngButton from \"../export-png-button\";\nimport ExportPdfButton from \"../export-pdf-button\";\nimport { useParams } from \"next/navigation\";\n\ntype ReportDetail = {\n  _id?: { $oid: string } | string;\n  received_at?: { $date: { $numberLong: string } } | string;\n  message_type?: string;\n  msh?: { sending_app?: string; sending_fac?: string; timestamp?: string };\n  pid?: { patient_id?: string; alt_patient_id?: string; alias_patient?: string; name?: string | null; dob?: string; sex?: string };\n  orders?: Array<{\n    obr?: {\n      placer_order?: string;\n      filler_order?: string;\n      service?: { id?: string; text?: string };\n      observation_datetime?: string;\n    };\n    observations?: Array<{\n      set_id?: string;\n      value_type?: string;\n      id?: { id?: string; text?: string };\n      value?: string;\n      units?: { id?: string; text?: string };\n      ref_range?: string;\n      abnormal_flags?: string;\n      status?: string;\n    }>;\n  }>;\n};\n\nexport default function ReportPage() {\n  const { id } = useParams() as { id: string };\n  const [report, setReport] = useState<ReportDetail | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    let cancelled = false;\n    async function run() {\n      setLoading(true);\n      setError(null);\n      try {\n        const res = await fetch(`${process.env.NEXT_PUBLIC_API_URL}/api/v1/lab-reports/${id}`, { cache: \"no-store\" });\n        if (!res.ok) throw new Error(`HTTP ${res.status}`);\n        const data = (await res.json()) as ReportDetail;\n        if (!cancelled) setReport(data);\n      } catch (e: any) {\n        if (!cancelled) setError(e?.message || \"Failed to load report\");\n      } finally {\n        if (!cancelled) setLoading(false);\n      }\n    }\n    run();\n    return () => {\n      cancelled = true;\n    };\n  }, [id]);\n\n  // (no manual refresh button in reverted design)\n\n  if (loading) {\n    return (\n      <div className=\"space-y-4\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"text-sm text-zinc-500\">\n            <Link href=\"/dashboard\" className=\"underline underline-offset-2\">Dashboard</Link>\n            <span className=\"mx-2\">/</span>\n            <span>Report</span>\n          </div>\n          <div className=\"h-8 w-20 animate-pulse rounded bg-zinc-200 dark:bg-zinc-800\" />\n        </div>\n        <div className=\"rounded-xl border border-zinc-200 bg-white p-4 dark:border-zinc-800 dark:bg-zinc-900\">\n          <div className=\"mb-3 h-5 w-64 animate-pulse rounded bg-zinc-200 dark:bg-zinc-800\" />\n          <div className=\"grid gap-3 sm:grid-cols-2\">\n            {Array.from({ length: 4 }).map((_, i) => (\n              <div key={i} className=\"space-y-2\">\n                <div className=\"h-3 w-24 animate-pulse rounded bg-zinc-200 dark:bg-zinc-800\" />\n                <div className=\"h-4 w-40 animate-pulse rounded bg-zinc-200 dark:bg-zinc-800\" />\n              </div>\n            ))}\n          </div>\n        </div>\n        <div className=\"rounded-xl border border-zinc-200 bg-white p-4 dark:border-zinc-800 dark:bg-zinc-900\">\n          <div className=\"mb-3 h-5 w-40 animate-pulse rounded bg-zinc-200 dark:bg-zinc-800\" />\n          <div className=\"h-40 w-full animate-pulse rounded bg-zinc-200 dark:bg-zinc-800\" />\n        </div>\n      </div>\n    );\n  }\n  if (!report || error) {\n    return (\n      <div className=\"space-y-4\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"text-sm text-zinc-500\">\n            <Link href=\"/dashboard\" className=\"underline underline-offset-2\">Dashboard</Link>\n            <span className=\"mx-2\">/</span>\n            <span>Report</span>\n          </div>\n          <Link href=\"/dashboard\" passHref>\n            <Button variant=\"outline\" size=\"sm\">Back</Button>\n          </Link>\n        </div>\n        <Card>\n          <CardHeader className=\"p-4 pb-3\">\n            <CardTitle className=\"text-base\">Report not found</CardTitle>\n          </CardHeader>\n          <CardContent className=\"p-4 text-sm text-zinc-600 dark:text-zinc-400\">\n            {error ? `Error: ${error}` : \"Could not load report details. Please try again later.\"}\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  const patient = report?.pid ?? {};\n  const order = report?.orders?.[0]?.obr ?? {};\n  const observations = report?.orders?.[0]?.observations ?? [];\n  const receivedAt = (() => {\n    const receivedRaw = report?.received_at as any;\n    if (typeof receivedRaw === \"string\") return moment(receivedRaw).format(\"DD MMMM YYYY\");\n    if (receivedRaw?.$date?.$numberLong) return moment(Number(receivedRaw.$date.$numberLong)).format(\"DD MMMM YYYY\");\n    return \"\";\n  })();\n\n  return (\n    <div className=\"space-y-4\">\n      <div className=\"flex items-center justify-between\">\n        <div className=\"text-sm text-zinc-500\">\n          <Link href=\"/dashboard\" className=\"underline underline-offset-2\">Dashboard</Link>\n          <span className=\"mx-2\">/</span>\n          <span>Report</span>\n        </div>\n        <div className=\"flex items-center gap-2 print:hidden\">\n          <ExportJpgButton targetId=\"report-export\" filename={`report-${id}.jpg`} />\n          <ExportPngButton targetId=\"report-export\" filename={`report-${id}.png`} />\n          <ExportPdfButton targetId=\"report-export\" filename={`report-${id}.pdf`} />\n          <PrintButton />\n          <Link href=\"/dashboard\" passHref>\n            <Button variant=\"outline\" size=\"sm\">Back</Button>\n          </Link>\n        </div>\n      </div>\n\n      <div id=\"report-export\" className=\"space-y-4\">\n      {/* Export/Header block */}\n      <div className=\"rounded-xl border border-zinc-200 bg-white p-4 text-sm dark:border-zinc-800 dark:bg-white\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <div className=\"text-xs uppercase tracking-wider text-zinc-500\">Laboratory Information System</div>\n            <div className=\"text-base font-semibold text-zinc-900\">Laboratory Report</div>\n          </div>\n          <div className=\"text-right text-xs text-zinc-600\">\n            <div>Report ID: {String(id)}</div>\n            <div>Generated: {moment().format(\"DD MMMM YYYY\")}</div>\n          </div>\n        </div>\n      </div>\n      <Card>\n        <CardHeader className=\"p-4 pb-3\">\n          <CardTitle className=\"text-base\">\n            {order?.service?.id || \"Service\"} • {order?.service?.text || \"Report\"}\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"grid gap-3 p-4 text-sm sm:grid-cols-2\">\n          <div>\n            <div className=\"text-zinc-500\">Alias Patient</div>\n            <div className=\"font-medium\">{patient?.alias_patient || \"—\"}</div>\n          </div>\n          <div>\n            <div className=\"text-zinc-500\">Patient ID</div>\n            <div className=\"font-medium\">{patient?.patient_id || \"—\"}</div>\n          </div>\n          <div>\n            <div className=\"text-zinc-500\">Filler Order</div>\n            <div className=\"font-medium\">{order?.filler_order || \"—\"}</div>\n          </div>\n          <div>\n            <div className=\"text-zinc-500\">Received At</div>\n            <div className=\"font-medium\">{receivedAt || \"—\"}</div>\n          </div>\n        </CardContent>\n      </Card>\n\n      <Card className=\"overflow-hidden\">\n        <CardHeader className=\"p-4 pb-3\">\n          <CardTitle className=\"text-sm\">Observations</CardTitle>\n        </CardHeader>\n        <CardContent className=\"p-0\">\n          <Table>\n            <TableHeader className=\"bg-zinc-50 dark:bg-zinc-950\">\n              <TableRow className=\"hover:bg-transparent\">\n                <TableHead>Code</TableHead>\n                <TableHead>Name</TableHead>\n                <TableHead>Value</TableHead>\n                <TableHead>Units</TableHead>\n                <TableHead>Ref Range</TableHead>\n                <TableHead>Flag</TableHead>\n                <TableHead>Status</TableHead>\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {observations.length === 0 ? (\n                <TableRow>\n                  <TableCell colSpan={7} className=\"text-center text-zinc-500\">No observations</TableCell>\n                </TableRow>\n              ) : (\n                observations.map((obx, i) => {\n                  const code = obx?.id?.id || \"\";\n                  const name = obx?.id?.text || \"\";\n                  const value = obx?.value ?? \"\";\n                  const units = obx?.units?.id || obx?.units?.text || \"\";\n                  const ref = obx?.ref_range || \"\";\n                  const flag = obx?.abnormal_flags || \"\";\n                  const status = obx?.status || \"\";\n                  const isAbn = flag && flag !== \"N\";\n                  const strVal = String(value);\n                  const hasBase64 = strVal.includes(\"Base64^\");\n                  let attachment: { kind: \"image\" | \"pdf\"; src: string } | null = null;\n                  if (hasBase64) {\n                    const base64 = strVal.split(\"Base64^\").pop()?.trim() || \"\";\n                    const mime = base64.startsWith(\"JVBERi0\") || strVal.toLowerCase().includes(\"pdf\")\n                      ? \"application/pdf\"\n                      : \"image/jpeg\";\n                    const uri = `data:${mime};base64,${base64}`;\n                    attachment = mime === \"application/pdf\" ? { kind: \"pdf\", src: uri } : { kind: \"image\", src: uri };\n                  }\n                  return (\n                    <TableRow key={`${code}-${i}`}>\n                      <TableCell className=\"font-medium\">{code}</TableCell>\n                      <TableCell>{name}</TableCell>\n                      <TableCell className={isAbn ? \"text-rose-600\" : undefined}>\n                        {attachment ? (\n                          attachment.kind === \"image\" ? (\n                            <a href={attachment.src} target=\"_blank\" rel=\"noreferrer\">\n                              <img src={attachment.src} alt={name || code || \"attachment\"} className=\"h-16 w-16 rounded object-cover ring-1 ring-zinc-200 dark:ring-zinc-800\" />\n                            </a>\n                          ) : (\n                            <a href={attachment.src} target=\"_blank\" rel=\"noreferrer\" className=\"underline underline-offset-2\">Open PDF</a>\n                          )\n                        ) : (\n                          <>{value}</>\n                        )}\n                      </TableCell>\n                      <TableCell>{units}</TableCell>\n                      <TableCell className=\"text-zinc-500\">{ref}</TableCell>\n                      <TableCell>\n                        {flag ? (\n                          <span className={isAbn ? \"rounded-full bg-rose-100 px-2 py-0.5 text-xs text-rose-700 dark:bg-rose-900/30 dark:text-rose-300\" : \"rounded-full bg-zinc-100 px-2 py-0.5 text-xs text-zinc-700 dark:bg-zinc-800 dark:text-zinc-300\"}>\n                            {flag}\n                          </span>\n                        ) : (\n                          \"—\"\n                        )}\n                      </TableCell>\n                      <TableCell className=\"text-zinc-500\">{status}</TableCell>\n                    </TableRow>\n                  );\n                })\n              )}\n            </TableBody>\n          </Table>\n        </CardContent>\n      </Card>\n      {/* Footer block for export */}\n      <div className=\"rounded-xl border border-zinc-200 bg-white p-3 text-xs text-zinc-600 dark:border-zinc-800 dark:bg-white\">\n        Generated by LIS • {moment().format(\"DD MMMM YYYY\")}\n      </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}